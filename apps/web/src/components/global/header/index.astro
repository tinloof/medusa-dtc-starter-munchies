---
import type { Header as HeaderType } from "@packages/sanity/types";
import { listCountries } from "@/lib/medusa/regions";
import { HeaderClient } from "./header-client";
import AnnouncementBar from "./parts/announcement-bar.astro";
import { BottomBorder } from "./parts/bottom-border";

type Props = HeaderType;

const header = Astro.props;

const countries = await listCountries();
---

<header
  class="sticky top-0 z-50 flex w-full flex-col items-center bg-background"
>
  <AnnouncementBar {...header} />
  <HeaderClient
    client:load
    transition:persist
    header={header}
    countries={countries}
  />

  <div class="relative z-30 w-screen" id="navigation-portal" />

  <BottomBorder client:load className="lg:hidden" />
</header>
