---
import type { Footer as FooterType } from "sanity.types";
import RichText from "@/components/shared/rich-text.astro";
import { SanityImage } from "@/components/shared/sanity-image";
import BottomLinks from "./bottom-links.astro";
import { NewsLetter } from "./newsletter";
import TopLinks from "./top-links.astro";

type Props = FooterType;

const footer = Astro.props;
---

<NewsLetter {...footer} client:load>
  {footer.signup_success ? <RichText slot="successNode" value={footer.signup_success} /> : null}
  {footer.copy ? <RichText slot="copyNode" value={footer.copy} /> : null}
  {footer.footnote ? <RichText slot="footnoteNode" value={footer.footnote} /> : null}
  {footer.signup_error ? <RichText slot="errorNode" value={footer.signup_error} /> : null}
</NewsLetter>

<footer class="w-full bg-accent" id="footer">
  <div
    class="mx-auto flex w-full max-w-max-screen flex-col gap-2xl px-m pt-6xl pb-m text-background lg:px-xl lg:pb-xl"
  >
    <TopLinks {...footer} />
    {footer.image ? (
      <SanityImage className="lg:mt-2xl" data={footer.image} />
    ) : null}
    <BottomLinks {...footer} />
  </div>
</footer>
