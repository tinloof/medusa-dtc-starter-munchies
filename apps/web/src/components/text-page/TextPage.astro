---
import type { TEXT_PAGE_QUERYResult } from "@packages/sanity/types";
import TextPageRichText from "@/components/portable-text/TextPageRichText.astro";
import Body from "@/components/shared/typography/Body.astro";
import Heading from "@/components/shared/typography/Heading.astro";
import TableOfContents from "./TableOfContents";

interface Props {
  data: NonNullable<TEXT_PAGE_QUERYResult>;
}

const { data } = Astro.props;
---

<div class="scroll-mt-header-height flex-col items-center justify-center">
  <section class="flex w-full flex-col items-center justify-center gap-xs bg-accent px-xl py-8xl text-center text-background">
    <Heading
      class="heading-l mx-auto w-fit"
      desktopSize="5xl"
      font="serif"
      mobileSize="xl"
      tag="h1"
    >
      {data?.title}
    </Heading>
    <Body class="max-w-[600px]" font="sans" mobileSize="base">
      {data.description}
    </Body>
  </section>
  <section class="mx-auto h-full w-full max-w-max-screen flex-col items-stretch justify-start gap-xl px-m py-2xl lg:flex-row lg:justify-center lg:gap-6xl lg:py-8xl">
    <div class="flex w-full flex-col justify-center gap-xl lg:flex-row lg:gap-20">
      {data?.body && (
        <aside class="h-auto w-full lg:max-w-[300px]">
          <TableOfContents client:visible body={data.body} />
        </aside>
      )}
      {data?.body && (
        <div class="w-full lg:max-w-[700px]">
          <TextPageRichText value={data.body} />
        </div>
      )}
    </div>
  </section>
</div>
